<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lumifeed username</title>
    <!-- Linking CSS -->
    <!-- CSS Stylesheets -->
    <link rel="stylesheet" href="static/css/style.css" />
    <link rel="stylesheet" href="static/css/components/fonts.css" />
    <link rel="stylesheet" href="static/css/dark-mode.css" />
    <link rel="stylesheet" href="static/css/components/header.css" />
    <link rel="stylesheet" href="static/css/components/profile-nav.css" />
    <link rel="stylesheet" href="static/css/components/profile.css" />
    <link rel="stylesheet" href="static/css/utils.css" />

    <!-- Linking Favicon -->
    <link rel="shortcut icon" href="static/images/favicon.png" type="image/x-icon" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet" />

    <!-- Robots Metadata -->
    <meta name="robots" content="index, follow" />

    <!-- Theme Color for Mobile Browsers -->
    <meta name="theme-color" content="#ffffff" />
  </head>
  <body>
    <header class="fixed" itemscope itemtype="https://schema.org/WPHeader">
      <div class="header-wrapper full flex align-center">
        <div class="logo flex align-center justify-start" itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
          <img id="logo-img" src="static/images/favicon.png" alt="LumiFeed Logo" itemprop="logo" />
          <span id="logo-text" itemprop="name">LumiFeed</span>
        </div>

        <nav role="navigation" class="relative flexed" itemscope itemtype="https://schema.org/SiteNavigationElement">
          <div class="ul relative flexed justify-evenly">
            <!-- added: action: file upload / profile pic -->
            <div class="li li2 flexed" id="profile">
              <img class="iconImg" src="static/images/default-profile.svg" alt="" srcset="" />

              <!-- ------------------------------------
              ------------------------------  profile setttings  -->
              <div class="profile_settings" style="display: none">
                <div class="user_details">
                  <div class="profile_pic cen flexed">
                    <img src="static/images/default-profile.svg" alt="" srcset="" />
                  </div>
                  <div class="user_name">User.Username</div>
                  <div class="user_email">User.email@email1234.com</div>
                </div>
                <div class="delete_account flexed">
                  <button class="flexed" type="submit">DELETE ACCOUNT</button>
                </div>
              </div>
            </div>
            <div class="li li3 animated-underline-white">
              <a href="#" class="flexed" rel="noopener">Home</a>
            </div>
            <div class="li li4 animated-underline-white">
              <a href="#" class="flexed" rel="noopener">logout</a>
            </div>
          </div>
        </nav>

        <div class="buttons">
          <div class="dark-mode-btn dmbtn">
            <span id="dm">
              <img src="static/icons/dm2.svg" alt="dark mode button" />
            </span>
          </div>
        </div>
      </div>
      <script>
        const aboutDiv = document.querySelector(".li3");
        const contactDiv = document.querySelector(".li4");

        aboutDiv.addEventListener("click", () => {
          aboutDiv.querySelector("a").click();
        });

        contactDiv.addEventListener("click", () => {
          contactDiv.querySelector("a").click();
        });
      </script>
    </header>

    <!-- add new collection -->
    <div class="add_new_collection_btn flexed">
      <div class="img_container">
        <img src="static/icons/plus-circle.svg" alt="" />
      </div>
    </div>

    <!-- ------------------------------------
    ------------------------------ collections  -->

    <!-- currently there will be no new page for each playlist. so making them bigger instead -->
    <!-- first i thought this will be just a preview page, so i used collection_group, to show multiple 
      collections, but now they containonly one  -->
    <div class="collections_container flex-col">
      <div class="collection_group flexed permanent_collection">
        <div class="read_later collection">
          <div class="collection_name">Read Later</div>
          <div class="collection_content">
            <ul>
              <li data-url="">
                Crackdown on organised crime: NIA to launch national database of gangsters, jail networks, associates
                <span class="delete_article">
                  <!-- flash message of deletion -->
                  <img src="static/icons/delete.svg" alt="" srcset="" />
                </span>
              </li>
              <li data-url="">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam repudiandae nemo perferendis quod itaque laborum fugit rem. Adipisci aliquid tempore delectus deserunt eum.
                <span class="delete_article">
                  <!-- flash message of deletion -->
                  <img src="static/icons/delete.svg" alt="" srcset="" />
                </span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="collection_group flexed">
        <div class="saved_articles collection permanent_collection">
          <div class="collection_name">Saved Articles</div>
          <div class="collection_content"></div>
        </div>
      </div>

      <div class="collection_group flexed">
        <div class="collection">
          <div class="collection_name">
            Coll 1
            <span class="delete_collection">
              <img src="static/icons/delete.svg" alt="delete this collection" srcset="" />
            </span>
          </div>
          <div class="collection_content"></div>
        </div>
      </div>
    </div>

    <!-- ------------------------------------
    ------------------------------  js  -->
    <!-- profile toggle -->
    <script>
      profileIcon = document.getElementById("profile");
      profileDetails = document.querySelector(".profile_settings");

      profileIcon.addEventListener("click", () => {
        if (profileDetails.style.display === "none") {
          profileDetails.style.display = "flex";
        } else {
          profileDetails.style.display = "none";
        }
      });
    </script>
    <!-- add new collections -->
    <script>
      const newCollectionBtn = document.querySelector(".add_new_collection_btn");
      const collectionContainer = document.querySelector(".collections_container");

      newCollectionBtn.addEventListener("click", () => {
        // Prompt the user for the collection name
        const userInput = prompt("Enter the name for the new collection:");

        // Check if the user entered a name or cancelled the prompt
        if (userInput !== null && userInput.trim() !== "") {
          // Create the outer div
          const collectionGroup = document.createElement("div");
          collectionGroup.className = "collection_group flexed";

          // Create the inner div
          const collection = document.createElement("div");
          collection.className = "collection";

          // Create the collection name div
          const collectionName = document.createElement("div");
          collectionName.className = "collection_name";
          collectionName.textContent = userInput.trim(); // Use the user input here

          // Create the collection content div
          const collectionContent = document.createElement("div");
          collectionContent.className = "collection_content";

          // ul
          const collectionContentUl = document.createElement("ul");

          // span
          const deleteCollectionSpan = document.createElement("span");
          deleteCollectionSpan.className = "delete_collection";
          const deleteIcon = document.createElement("img");
          deleteIcon.src = "static/icons/delete.svg";
          deleteIcon.alt = "delete this collection";
          deleteIcon.setAttribute("srcset", ""); // This sets an empty srcset attribute

          // Nest the elements
          deleteCollectionSpan.appendChild(deleteIcon);
          collectionName.appendChild(deleteCollectionSpan);
          collectionContent.appendChild(collectionContentUl);
          collection.appendChild(collectionName);
          collection.appendChild(collectionContent);
          collectionGroup.appendChild(collection);

          // Append the entire structure to the collection container
          collectionContainer.appendChild(collectionGroup);

          // Alert the user that the collection has been added
          alert("Collection added!");
        } else {
          // Alert the user if they didn't enter a name or cancelled the prompt
          alert("Collection creation cancelled or no name entered.");
        }
      });
    </script>

    <!-- delete articles from playlists -->
    <script>
      const deleteBtns = document.querySelectorAll(".delete_article");
      const articleLis = document.querySelectorAll(".collection_content ul li");
      deleteBtns.forEach((btn, index) => {
        btn.addEventListener("click", () => {
          articleLis[index].style.display = "none";
          document.removeChild(articleLis[index]);
          alert("article removed from collection.");
        });
      });
    </script>

    <!-- delete collections -->
    <script>
      const deleteCollectionBtns = document.querySelectorAll(".delete_collection");
      const collectionGroups = document.querySelectorAll(".collection_group");

      // Create a modal dialog
      const modal = document.createElement("div");
      modal.style.cssText = `
                          position: fixed;
                          top: 50%;
                          left: 50%;
                          transform: translate(-50%, -50%);
                          background-color: white;
                          color: black;
                          padding: 20px;
                          border-radius: 5px;
                          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                          z-index: 1000;
                          display: none;
                        `;
      const modalContent = document.createElement("p");
      modalContent.textContent = "Do you want to delete the collection? It cannot be recovered again.";

      const yesBtn = document.createElement("button");
      yesBtn.textContent = "Yes";
      yesBtn.style.marginRight = "10px";

      const noBtn = document.createElement("button");
      noBtn.textContent = "No";

      modal.appendChild(modalContent);
      modal.appendChild(yesBtn);
      modal.appendChild(noBtn);
      document.body.appendChild(modal);

      deleteCollectionBtns.forEach((btn, index) => {
        btn.addEventListener("click", () => {
          modal.style.display = "block";

          const handleYes = () => {
            collectionGroups[index + 2].remove();
            modal.style.display = "none";
            alert("Collection deleted.");
            cleanup();
          };

          const handleNo = () => {
            modal.style.display = "none";
            cleanup();
          };

          const cleanup = () => {
            yesBtn.removeEventListener("click", handleYes);
            noBtn.removeEventListener("click", handleNo);
          };

          yesBtn.addEventListener("click", handleYes);
          noBtn.addEventListener("click", handleNo);
        });
      });
    </script>
    
    <script type="text/javascript" src="static/js/functions/dark_mode.js"></script>
  </body>
</html>
